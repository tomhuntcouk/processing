!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.TransformationMatrix=t():r.TransformationMatrix=t()}(self,(function(){return(()=>{"use strict";var r={d:(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:(r,t)=>Object.prototype.hasOwnProperty.call(r,t),r:r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};function e(r,t){return Array.isArray(t)?[r.a*t[0]+r.c*t[1]+r.e,r.b*t[0]+r.d*t[1]+r.f]:{x:r.a*t.x+r.c*t.y+r.e,y:r.b*t.x+r.d*t.y+r.f}}function n(r,t){return t.map((function(t){return e(r,t)}))}function o(r){return{a:parseFloat(r.a),b:parseFloat(r.b),c:parseFloat(r.c),d:parseFloat(r.d),e:parseFloat(r.e),f:parseFloat(r.f)}}r.r(t),r.d(t,{applyToPoint:()=>e,applyToPoints:()=>n,compose:()=>m,decomposeTSR:()=>X,flipOrigin:()=>L,flipX:()=>U,flipY:()=>$,fromDefinition:()=>k,fromObject:()=>o,fromString:()=>i,fromTransformAttribute:()=>G,fromTriangles:()=>O,identity:()=>u,inverse:()=>c,isAffineMatrix:()=>p,rotate:()=>S,rotateDEG:()=>j,scale:()=>C,shear:()=>I,skew:()=>_,skewDEG:()=>F,smoothMatrix:()=>N,toCSS:()=>R,toSVG:()=>T,toString:()=>P,transform:()=>g,translate:()=>h});var a=/^matrix\(\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*\)$/i;function i(r){var t=r.match(a);if(null===t||t.length<7)throw new Error("'".concat(r,"' is not a matrix"));return{a:parseFloat(t[1]),b:parseFloat(t[2]),c:parseFloat(t[3]),d:parseFloat(t[4]),e:parseFloat(t[5]),f:parseFloat(t[6])}}function u(){return{a:1,c:0,e:0,b:0,d:1,f:0}}function c(r){var t=r.a,e=r.b,n=r.c,o=r.d,a=r.e,i=r.f,u=t*o-e*n;return{a:o/u,b:e/-u,c:n/-u,d:t/u,e:(o*a-n*i)/-u,f:(e*a-t*i)/u}}function f(r){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},f(r)}function s(r){return void 0===r}function l(r){return"number"==typeof r&&!Number.isNaN(r)&&Number.isFinite(r)}function p(r){return"object"===f(t=r)&&null!==t&&!Array.isArray(t)&&"a"in r&&l(r.a)&&"b"in r&&l(r.b)&&"c"in r&&l(r.c)&&"d"in r&&l(r.d)&&"e"in r&&l(r.e)&&"f"in r&&l(r.f);var t}function h(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{a:1,c:0,e:r,b:0,d:1,f:t}}function d(r){return function(r){if(Array.isArray(r))return b(r)}(r)||A(r)||v(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(r){return function(r){if(Array.isArray(r))return r}(r)||A(r)||v(r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(r,t){if(r){if("string"==typeof r)return b(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?b(r,t):void 0}}function b(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function A(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function g(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];var n=function(r,t){return{a:r.a*t.a+r.c*t.b,c:r.a*t.c+r.c*t.d,e:r.a*t.e+r.c*t.f+r.e,b:r.b*t.a+r.d*t.b,d:r.b*t.c+r.d*t.d,f:r.b*t.e+r.d*t.f+r.f}};switch((t=Array.isArray(t[0])?t[0]:t).length){case 0:throw new Error("no matrices provided");case 1:return t[0];case 2:return n(t[0],t[1]);default:var o=t,a=y(o),i=a[0],u=a[1],c=a.slice(2),f=n(i,u);return g.apply(void 0,[f].concat(d(c)))}}function m(){return g.apply(void 0,arguments)}var x=Math.cos,M=Math.sin,w=Math.PI;function S(r,t,e){var n=x(r),o=M(r),a={a:n,c:-o,e:0,b:o,d:n,f:0};return s(t)||s(e)?a:g([h(t,e),a,h(-t,-e)])}function j(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return S(r*w/180,t,e)}function C(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;s(t)&&(t=r);var o={a:r,c:0,e:0,b:0,d:t,f:0};return s(e)||s(n)?o:g([h(e,n),o,h(-e,-n)])}function I(r,t){return{a:1,c:r,e:0,b:t,d:1,f:0}}var E=Math.tan;function _(r,t){return{a:1,c:E(r),e:0,b:E(t),d:1,f:0}}function F(r,t){return _(r*Math.PI/180,t*Math.PI/180)}function R(r){return P(r)}function T(r){return P(r)}function P(r){return"matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")")}function N(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return{a:Math.round(r.a*t)/t,b:Math.round(r.b*t)/t,c:Math.round(r.c*t)/t,d:Math.round(r.d*t)/t,e:Math.round(r.e*t)/t,f:Math.round(r.f*t)/t}}function O(r,t){var e=null!=r[0].x?r[0].x:r[0][0],n=null!=r[0].y?r[0].y:r[0][1],o=null!=t[0].x?t[0].x:t[0][0],a=null!=t[0].y?t[0].y:t[0][1],i=null!=r[1].x?r[1].x:r[1][0],u=null!=r[1].y?r[1].y:r[1][1],f=null!=t[1].x?t[1].x:t[1][0],s=null!=t[1].y?t[1].y:t[1][1],l=null!=r[2].x?r[2].x:r[2][0],p=null!=r[2].y?r[2].y:r[2][1],h=null!=t[2].x?t[2].x:t[2][0],d=null!=t[2].y?t[2].y:t[2][1];return N(g([{a:o-h,b:a-d,c:f-h,d:s-d,e:h,f:d},c({a:e-l,b:n-p,c:i-l,d:u-p,e:l,f:p})]))}function k(r){return Array.isArray(r)?r.map(t):t(r);function t(r){switch(r.type){case"matrix":if("a"in r&&"b"in r&&"c"in r&&"d"in r&&"e"in r&&"f"in r)return o(r);throw new Error("MISSING_MANDATORY_PARAM");case"translate":if(!("tx"in r))throw new Error("MISSING_MANDATORY_PARAM");return"ty"in r?h(r.tx,r.ty):h(r.tx);case"scale":if(!("sx"in r))throw new Error("MISSING_MANDATORY_PARAM");return"sy"in r?C(r.sx,r.sy):C(r.sx);case"rotate":if(!("angle"in r))throw new Error("MISSING_MANDATORY_PARAM");return"cx"in r&&"cy"in r?j(r.angle,r.cx,r.cy):j(r.angle);case"skewX":if(!("angle"in r))throw new Error("MISSING_MANDATORY_PARAM");return F(r.angle,0);case"skewY":if(!("angle"in r))throw new Error("MISSING_MANDATORY_PARAM");return F(0,r.angle);case"shear":if(!("shx"in r)||!("shy"in r))throw new Error("MISSING_MANDATORY_PARAM");return I(r.shx,r.shy);default:throw new Error("UNSUPPORTED_DESCRIPTOR")}}}function D(r,t,e,n){this.message=r,this.expected=t,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,D)}function Y(r,t){t=void 0!==t?t:{};var e,n={},o={transformList:q},a=q,i="matrix",u="(",c=")",f="translate",s="scale",l="rotate",p="skewX",h="skewY",d=/^[eE]/,y=/^[+\-]/,v=/^[0-9]/,b=/^[ \t\r\n]/,A=k("matrix",!1),g=k("(",!1),m=k(")",!1),x=k("translate",!1),M=k("scale",!1),w=k("rotate",!1),S=k("skewX",!1),j=k("skewY",!1),C=k(",",!1),I={type:"other",description:"fractionalConstant"},E=Y(["e","E"],!1,!1),_=Y(["+","-"],!1,!1),F=Y([["0","9"]],!1,!1),R=Y([" ","\t","\r","\n"],!1,!1),T=0,P=[{line:1,column:1}],N=[],O=0;if("startRule"in t){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');a=o[t.startRule]}function k(r,t){return{type:"literal",text:r,ignoreCase:t}}function Y(r,t,e){return{type:"class",parts:r,inverted:t,ignoreCase:e}}function G(t){var e,n=P[t];if(n)return n;for(e=t-1;!P[e];)e--;for(n={line:(n=P[e]).line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return P[t]=n,n}var X,U,$="string"==typeof t.filename&&t.filename.length>0;function L(r,e){var n={};$&&(n.filename=t.filename);var o=G(r);n.start={offset:r,line:o.line,column:o.column};var a=G(e);return n.end={offset:e,line:a.line,column:a.column},n}function V(r){var t=N[N.length-1];T<t.pos||(T>t.pos&&(t.pos=T,t.variants=[]),t.variants.push(r))}function q(){var r,t,e,o;for(T,r=[],t=er();t!==n;)r.push(t),t=er();for((t=z())===n&&(t=null),e=[],o=er();o!==n;)e.push(o),o=er();return t}function z(){var r,t,e,o,a;if(r=T,(t=B())!==n){if(e=[],(o=K())!==n)for(;o!==n;)e.push(o),o=K();else e=n;e!==n&&(o=z())!==n?(a=o,r=t.concat(a)):(T=r,r=n)}else T=r,r=n;return r===n&&(r=B()),r}function B(){var t;return(t=function(){var t,e,o,a,f,s,l,p,h,d,y,v,b,x=function(r){0===O&&V(r)};if(t=T,x(A),r.substr(T,6)===i?(e=i,T+=6):e=n,e!==n){for(o=[],a=er();a!==n;)o.push(a),a=er();if(x(g),40===r.charCodeAt(T)?(a=u,T++):a=n,a!==n){for(f=[],s=er();s!==n;)f.push(s),s=er();if((s=H())!==n)if(K()!==n)if((l=H())!==n)if(K()!==n)if((p=H())!==n)if(K()!==n)if((h=H())!==n)if(K()!==n)if((d=H())!==n)if(K()!==n)if((y=H())!==n){for(v=[],b=er();b!==n;)v.push(b),b=er();x(m),41===r.charCodeAt(T)?(b=c,T++):b=n,b!==n?t=[{type:"matrix",a:s,b:l,c:p,d:h,e:d,f:y}]:(T=t,t=n)}else T=t,t=n;else T=t,t=n;else T=t,t=n;else T=t,t=n;else T=t,t=n;else T=t,t=n;else T=t,t=n;else T=t,t=n;else T=t,t=n;else T=t,t=n;else T=t,t=n}else T=t,t=n}else T=t,t=n;return t}())===n&&((t=function(){var t,e,o,a,i,s,l,p,h,d,y,v=function(r){0===O&&V(r)};if(t=T,v(x),r.substr(T,9)===f?(e=f,T+=9):e=n,e!==n){for(o=[],a=er();a!==n;)o.push(a),a=er();if(v(g),40===r.charCodeAt(T)?(a=u,T++):a=n,a!==n){for(i=[],s=er();s!==n;)i.push(s),s=er();if((s=H())!==n){for((l=J())===n&&(l=null),p=[],h=er();h!==n;)p.push(h),h=er();v(m),41===r.charCodeAt(T)?(h=c,T++):h=n,h!==n?(y={type:"translate",tx:s},(d=l)&&(y.ty=d),t=[y]):(T=t,t=n)}else T=t,t=n}else T=t,t=n}else T=t,t=n;return t}())===n&&((t=function(){var t,e,o,a,i,f,l,p,h,d,y,v=function(r){0===O&&V(r)};if(t=T,v(M),r.substr(T,5)===s?(e=s,T+=5):e=n,e!==n){for(o=[],a=er();a!==n;)o.push(a),a=er();if(v(g),40===r.charCodeAt(T)?(a=u,T++):a=n,a!==n){for(i=[],f=er();f!==n;)i.push(f),f=er();if((f=H())!==n){for((l=J())===n&&(l=null),p=[],h=er();h!==n;)p.push(h),h=er();v(m),41===r.charCodeAt(T)?(h=c,T++):h=n,h!==n?(y={type:"scale",sx:f},(d=l)&&(y.sy=d),t=[y]):(T=t,t=n)}else T=t,t=n}else T=t,t=n}else T=t,t=n;return t}())===n&&((t=function(){var t,e,o,a,i,f,s,p,h,d,y,v=function(r){0===O&&V(r)};if(t=T,v(w),r.substr(T,6)===l?(e=l,T+=6):e=n,e!==n){for(o=[],a=er();a!==n;)o.push(a),a=er();if(v(g),40===r.charCodeAt(T)?(a=u,T++):a=n,a!==n){for(i=[],f=er();f!==n;)i.push(f),f=er();if((f=H())!==n){for(s=function(){var r,t,e;return r=T,K()!==n&&(t=H())!==n&&K()!==n&&(e=H())!==n?r=[t,e]:(T=r,r=n),r}(),s===n&&(s=null),p=[],h=er();h!==n;)p.push(h),h=er();v(m),41===r.charCodeAt(T)?(h=c,T++):h=n,h!==n?(y={type:"rotate",angle:f},(d=s)&&(y.cx=d[0],y.cy=d[1]),t=[y]):(T=t,t=n)}else T=t,t=n}else T=t,t=n}else T=t,t=n;return t}())===n&&((t=function(){var t,e,o,a,i,f,s,l,h=function(r){0===O&&V(r)};if(t=T,h(S),r.substr(T,5)===p?(e=p,T+=5):e=n,e!==n){for(o=[],a=er();a!==n;)o.push(a),a=er();if(h(g),40===r.charCodeAt(T)?(a=u,T++):a=n,a!==n){for(i=[],f=er();f!==n;)i.push(f),f=er();if((f=H())!==n){for(s=[],l=er();l!==n;)s.push(l),l=er();h(m),41===r.charCodeAt(T)?(l=c,T++):l=n,l!==n?t=[{type:"skewX",angle:f}]:(T=t,t=n)}else T=t,t=n}else T=t,t=n}else T=t,t=n;return t}())===n&&(t=function(){var t,e,o,a,i,f,s,l,p=function(r){0===O&&V(r)};if(t=T,p(j),r.substr(T,5)===h?(e=h,T+=5):e=n,e!==n){for(o=[],a=er();a!==n;)o.push(a),a=er();if(p(g),40===r.charCodeAt(T)?(a=u,T++):a=n,a!==n){for(i=[],f=er();f!==n;)i.push(f),f=er();if((f=H())!==n){for(s=[],l=er();l!==n;)s.push(l),l=er();p(m),41===r.charCodeAt(T)?(l=c,T++):l=n,l!==n?t=[{type:"skewY",angle:f}]:(T=t,t=n)}else T=t,t=n}else T=t,t=n}else T=t,t=n;return t}()))))),t}function H(){var t,e,o,a;return t=T,e=T,(o=Z())===n&&(o=null),a=function(){var t,e,o;return t=T,e=function(){var t,e,o,a,i,u,c;return i=I,0===O&&V(i),O++,t=T,(e=rr())===n&&(e=null),46===r.charCodeAt(T)?(o=".",T++):o=n,o!==n&&(a=rr())!==n?(c=a,t=[(u=e)?u.join(""):null,".",c.join("")].join("")):(T=t,t=n),t===n&&(t=T,(e=rr())!==n?(46===r.charCodeAt(T)?(o=".",T++):o=n,o!==n?t=e.join(""):(T=t,t=n)):(T=t,t=n)),O--,t}(),e!==n?((o=W())===n&&(o=null),t=[e,o||null].join("")):(T=t,t=n),t===n&&(t=T,(e=rr())!==n&&(o=W())!==n?t=[e,o].join(""):(T=t,t=n)),t}(),a!==n?e=o=[o,a]:(T=e,e=n),e!==n&&(e=parseFloat(e.join(""))),(t=e)===n&&(t=T,e=T,(o=Z())===n&&(o=null),a=function(){var r;return T,(r=rr())!==n&&(r=r.join("")),r}(),a!==n?e=o=[o,a]:(T=e,e=n),e!==n&&(e=parseInt(e.join(""))),t=e),t}function J(){var r,t;return r=T,K()!==n&&(t=H())!==n?r=t:(T=r,r=n),r}function K(){var r,t,e,o,a;if(r=T,t=[],(e=er())!==n)for(;e!==n;)t.push(e),e=er();else t=n;if(t!==n){for((e=Q())===n&&(e=null),o=[],a=er();a!==n;)o.push(a),a=er();r=t=[t,e,o]}else T=r,r=n;if(r===n)if(r=T,(t=Q())!==n){for(e=[],o=er();o!==n;)e.push(o),o=er();r=t=[t,e]}else T=r,r=n;return r}function Q(){var t,e;return e=C,0===O&&V(e),44===r.charCodeAt(T)?(t=",",T++):t=n,t}function W(){var t,e,o,a,i;return t=T,i=E,0===O&&V(i),d.test(r.charAt(T))?(e=r.charAt(T),T++):e=n,e!==n?((o=Z())===n&&(o=null),(a=rr())!==n?t=["e",o,a.join("")].join(""):(T=t,t=n)):(T=t,t=n),t}function Z(){var t,e;return e=_,0===O&&V(e),y.test(r.charAt(T))?(t=r.charAt(T),T++):t=n,t}function rr(){var r,t;if(r=[],(t=tr())!==n)for(;t!==n;)r.push(t),t=tr();else r=n;return r}function tr(){var t,e;return e=F,0===O&&V(e),v.test(r.charAt(T))?(t=r.charAt(T),T++):t=n,t}function er(){var t,e;return e=R,0===O&&V(e),b.test(r.charAt(T))?(t=r.charAt(T),T++):t=n,t}if(N.push({pos:T,variants:[]}),(e=a())!==n&&T===r.length)return e;throw e!==n&&T<r.length&&V({type:"end"}),X=N[0],U=X.pos,function(r,t,e){return new D(D.buildMessage(r,t,e),r,t,e)}(X.variants,U<r.length?r.charAt(U):null,U<r.length?L(U,U+1):L(U,U))}function G(r){return Y(r)}function X(r){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t?r=m(r,C(e?-1:1,-1)):e&&(r=m(r,C(-1,1)));var n,o,a,i=r.a,u=r.b,c=r.c,f=r.d;if(0!==i||0!==c){var s=Math.hypot(i,c);n=s,o=(i*f-u*c)/s;var l=Math.acos(i/s);a=c>0?-l:l}else if(0!==u||0!==f){var p=Math.hypot(u,f);n=(i*f-u*c)/p,o=p;var h=Math.acos(u/p);a=Math.PI/2+(f>0?-h:h)}else n=0,o=0,a=0;return e&&(n=-n),t&&(o=-o),{translate:{tx:r.e,ty:r.f},scale:{sx:n,sy:o},rotation:{angle:a}}}function U(){return{a:1,c:0,e:0,b:0,d:-1,f:0}}function $(){return{a:-1,c:0,e:0,b:0,d:1,f:0}}function L(){return{a:-1,c:0,e:0,b:0,d:-1,f:0}}return function(r,t){function e(){this.constructor=r}e.prototype=t.prototype,r.prototype=new e}(D,Error),D.buildMessage=function(r,t,e){var n={literal:function(r){return'"'+a(r.text)+'"'},class:function(r){var t=r.parts.map((function(r){return Array.isArray(r)?i(r[0])+"-"+i(r[1]):i(r)}));return"["+(r.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(r){return r.description},not:function(r){return"not "+u(r.expected)}};function o(r){return r.charCodeAt(0).toString(16).toUpperCase()}function a(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+o(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+o(r)}))}function i(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+o(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+o(r)}))}function u(r){return n[r.type](r)}return"Expected "+function(r){var t,e,n=r.map(u);if(n.sort(),n.length>0){for(t=1,e=1;t<n.length;t++)n[t-1]!==n[t]&&(n[e]=n[t],e++);n.length=e}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(r)+" but "+function(r){return r?'"'+a(r)+'"':"end of input"}(t)+" found."},t})()}));
//# sourceMappingURL=transformation-matrix.min.js.map